<!DOCTYPE html>
<html lang="en" ng-app="viewdata">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css"> <!-- load bootstrap css -->
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css"> <!-- load fontawesome -->
    <script src="node_modules/chart.js/dist/Chart.min.js"></script>
<script src="node_modules/angular-chart.js/dist/angular-chart.min.js"></script>
    <style>
        body{
	    padding-top:10%;
	}

	#chart-size{
	    width:600px;
	    height:600px;
	}
    </style>
</head>

<body ng-controller="viewdata-ctrl">
<div class="container-fluid">
    <div class="row">
                                            <!-- Header -->
            <div class="col-md-12 header">
                <div class="title">
                    <p>Fitbit</p>
                </div>
                <a><img src="img/logout.png" class="img-circle" width="20"height="20"><span style="font-size: 16px;color: white;">Logout</span></a>
             </div>
                                            <!-- Profile Picture -->
            <div class="col-md-9 profilePic">
                <div class="row">
                    <div class="pic">
                        <img src="img/profile.png" class="img-circle dp" width="150" height="150">
                    </div>
                </div>
            </div>
                                            <!-- Options -->
            <div class="col-md-9 options">
                 <div class="row">
                     <div class="col-md-3 profile">
                         <img src="img/pro_options.png" class="img-circle" width="20" height="20">
                         </br>
                         <a href="#" ng-click="show=1"><span>Profile</span></a>
                     </div>
                     <div class="col-md-3 heartRate">
                         <img src="img/heart.png" class="img-circle" width="20" height="20">
                         </br><a href="#" ng-click="show=2"><span>Heart Rate</span></a>
                     </div>
                     <div class="col-md-3 steps">
                         <img src="img/steps.png" class="img-circle" width="20" height="20">
                         </br><a href="#" ng-click="show=3"><span>Steps</span></a>
                     </div>
                </div>
            </div>
                                            <!-- Details -->
                <!-- Profile -->
                <div class="col-md-9 userDetails" ng-show="show==1">
                    <div class="row">
					
                            <img src="img/profile.png" class="img img-responsive" width="250" height="250">
                        </div>
                        <div class="col-md-6 profDetails">
                            <h2>Lionel Messi</h2>
                            <table class="table">
                                <tbody>
                                <tr class="active">
                                    <td>DOB</td>
                                    <td>June 24,1987</td>
                                </tr>
                                <tr class="success">
                                    <td>Age</td>
                                    <td>29</td>
                                </tr>
                                <tr class="info">
                                    <td>Gender</td>
                                    <td>Male</td>
                                </tr>
                                <tr class="warning">
                                    <td>Height</td>
                                    <td>5'7</td>
                                </tr>
                                <tr class="danger">
                                    <td>Weight</td>
                                    <td>148 lbs</td>
                                </tr>
                                </tbody>

                            </table>
                        </div>

                    </div>
                </div>
        <!-- Heart Rate -->
        <div class="col-md-9 userDetails" ng-show="show==2">
            <div class="row">

            </div>
        </div>
        <!-- Steps -->
        <div class="col-md-9 userDetails" ng-show="show==3">
            <div class="row">

            </div>
         </div>
    </div>
</div>
<div class="container">
    <img src="{{profile.avatar}}"/>
    <button ng-click="steps()">Steps Info</button>
    <button ng-click="heart()">Heart Rate Info</button>
<div id="chart-size">
<canvas id="line" class="chart chart-line" chart-data="data"
chart-labels="labels" chart-series="series" chart-options="options"
chart-dataset-override="datasetOverride" chart-click="onClick"
</canvas> 
</div>
</div>
<script>
    angular.module('viewdata',['chart.js']).
	controller('viewdata-ctrl', function($scope,$http){
	     /*$http({
		method:'GET',
		url:'/getUserData',
	     }).then(function successCallback(response){
		    console.log(response.data);
		    $scope.profile = response.data.user;
		}, function errorCallback(response){
		    console.log(response);
		});*/

	     $scope.steps = function(){
		$http({
		    method:'GET',
		    url:'/getStepData'
		}).then(function successCallback(response){
			console.log(response);
			var labels = [], data=[];
			console.log(response.data["activities-steps"]);
    			response.data["activities-steps"].forEach(function(packet) {
      			labels.push(new Date(packet.dateTime).getDay());
      			data.push(packet.value);
			$scope.labels = labels;
 		        $scope.data = data;
  			$scope.onClick = function (points, evt) {
    				console.log(points, evt);
  			};
  			$scope.datasetOverride = [{ yAxisID: 'y-axis-1' }];
  			$scope.options = {
    			    scales: {
      				yAxes: [
        			    {
          				id: 'y-axis-1',
          				type: 'linear',
          				display: true,
          				position: 'left'
        			    }
      				]
    			    }
 			 };

    		});
		   }, function errorCallback(response){

		 })
	     };

	     $scope.heart = function(){
		 $http({
                    method:'GET',
                    url:'/getHeartData'
                }).then(function successCallback(response){
                        console.log(response);
                        var labels = [], data=[];
                        console.log(response.data["activities-steps"]);
                        response.data["activities-steps"].forEach(function(packet) {
                        labels.push(new Date(packet.dateTime).getDay());
                        data.push(packet.value);
                        $scope.labels = labels;
                        $scope.data = data;
                        $scope.onClick = function (points, evt) {
                                console.log(points, evt);
                        };
                        $scope.datasetOverride = [{ yAxisID: 'y-axis-1' }];
                        $scope.options = {
                            scales: {
                                yAxes: [
                                    {
                                        id: 'y-axis-1',
                                        type: 'linear',
                                        display: true,
                                        position: 'left'
                                    }
                                ]
                            }
                         };

                });
                   }, function errorCallback(response){

                 })

	     };
	});
</script>
</body>
</html>
